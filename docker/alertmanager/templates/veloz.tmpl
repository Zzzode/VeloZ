{{ define "slack.veloz.title" }}
[{{ .Status | toUpper }}{{ if eq .Status "firing" }}:{{ .Alerts.Firing | len }}{{ end }}] {{ .CommonLabels.alertname }}
{{ end }}

{{ define "slack.veloz.text" }}
{{ range .Alerts }}
*Alert:* {{ .Annotations.summary }}
*Severity:* {{ .Labels.severity }}
*Service:* {{ .Labels.service }}
*Description:* {{ .Annotations.description }}
{{ if .Labels.instance }}*Instance:* {{ .Labels.instance }}{{ end }}
{{ end }}
{{ end }}

{{ define "pagerduty.veloz.description" }}
{{ .CommonAnnotations.summary }}
{{ end }}

{{ define "pagerduty.veloz.firing" }}
{{ range .Alerts.Firing }}
- {{ .Annotations.summary }}: {{ .Annotations.description }}
{{ end }}
{{ end }}

{{ define "opsgenie.veloz.message" }}
{{ .CommonLabels.alertname }}: {{ .CommonAnnotations.summary }}
{{ end }}

{{ define "opsgenie.veloz.description" }}
{{ range .Alerts }}
Alert: {{ .Labels.alertname }}
Severity: {{ .Labels.severity }}
Service: {{ .Labels.service }}
Summary: {{ .Annotations.summary }}
Description: {{ .Annotations.description }}
---
{{ end }}
{{ end }}

{{ define "email.veloz.subject" }}
[VeloZ {{ .Status | toUpper }}] {{ .CommonLabels.alertname }}
{{ end }}

{{ define "email.veloz.html" }}
<!DOCTYPE html>
<html>
<head>
  <style>
    body { font-family: Arial, sans-serif; }
    .alert { padding: 10px; margin: 10px 0; border-radius: 4px; }
    .critical { background-color: #ff4444; color: white; }
    .warning { background-color: #ffbb33; color: black; }
    .info { background-color: #33b5e5; color: white; }
    .resolved { background-color: #00C851; color: white; }
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    th { background-color: #4CAF50; color: white; }
  </style>
</head>
<body>
  <h1>VeloZ Alert Notification</h1>
  <p>Status: <strong>{{ .Status | toUpper }}</strong></p>

  {{ if gt (len .Alerts.Firing) 0 }}
  <h2>Firing Alerts ({{ .Alerts.Firing | len }})</h2>
  <table>
    <tr>
      <th>Alert</th>
      <th>Severity</th>
      <th>Service</th>
      <th>Description</th>
    </tr>
    {{ range .Alerts.Firing }}
    <tr class="{{ .Labels.severity }}">
      <td>{{ .Labels.alertname }}</td>
      <td>{{ .Labels.severity }}</td>
      <td>{{ .Labels.service }}</td>
      <td>{{ .Annotations.description }}</td>
    </tr>
    {{ end }}
  </table>
  {{ end }}

  {{ if gt (len .Alerts.Resolved) 0 }}
  <h2>Resolved Alerts ({{ .Alerts.Resolved | len }})</h2>
  <table>
    <tr>
      <th>Alert</th>
      <th>Severity</th>
      <th>Service</th>
      <th>Description</th>
    </tr>
    {{ range .Alerts.Resolved }}
    <tr class="resolved">
      <td>{{ .Labels.alertname }}</td>
      <td>{{ .Labels.severity }}</td>
      <td>{{ .Labels.service }}</td>
      <td>{{ .Annotations.description }}</td>
    </tr>
    {{ end }}
  </table>
  {{ end }}

  <p><small>Generated by VeloZ Alertmanager</small></p>
</body>
</html>
{{ end }}
